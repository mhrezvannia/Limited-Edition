{% extends 'base.html' %}

{% block title %}{{ product.title }}{% endblock %}

{% block content %}
<h1>{{ product.title }}</h1>
<p>{{ product.content }}</p>
<p><strong>Price:</strong> ${{ product.price }}</p>
{% if product.has_discount %}
<p><strong>Discount:</strong> {{ product.discount_value }} {% if product.discount_type == 1 %}Percentage{% else %}Flat{% endif %}</p>
{% endif %}
<p><strong>Vendor:</strong> {{ product.vendor.name }}</p>

<a href="{% url 'product_update' product.pk %}" class="btn btn-warning">Edit</a>
<a href="{% url 'product_delete' product.pk %}" class="btn btn-danger">Delete</a>

<hr>
<h3>Product Pictures</h3>
<ul class="list-group">
    {% for picture in product.productpicture_set.all %}
    <li class="list-group-item">
        <img src="{{ picture.image.url }}" alt="{{ picture.alt }}" style="max-width: 150px;">
    </li>
    {% empty %}
    <li class="list-group-item">No pictures available.</li>
    {% endfor %}
</ul>

<hr>
<h3>Comments</h3>
<ul class="list-group">
    {% for comment in product.comment_set.all %}
    <li class="list-group-item">{{ comment.customer.email }}: {{ comment.content }}</li>
    {% empty %}
    <li class="list-group-item">No comments yet.</li>
    {% endfor %}
</ul>

<hr>
<h3>Ratings</h3>
<ul class="list-group">
    {% for rate in product.rate_set.all %}
    <li class="list-group-item">{{ rate.customer.email }} rated {{ rate.star_count }} stars</li>
    {% empty %}
    <li class="list-group-item">No ratings yet.</li>
    {% endfor %}
</ul>

<a href="{% url 'product_list' %}" class="btn btn-secondary mt-3">Back to Products</a>
{% endblock %}
